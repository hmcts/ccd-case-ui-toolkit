<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-xl">Check your answers</h1>
    <!-- Top table for manage link cases journey -->
    @if (!isLinkCasesJourney) {
      <table id="cases-to-unlink-table" class="govuk-table">
        <caption class="govuk-table__caption govuk-table__caption--m">Cases to unlink</caption>
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Case name and number</th>
            <th scope="col" class="govuk-table__header"></th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          @for (case of casesToUnlink; track case) {
            <tr class="govuk-table__row">
              <td class="govuk-table__cell">
                {{case.caseName}}  <br> {{case.caseReference | ccdCaseReference}}
              </td>
              <td class="govuk-table__cell">
                <a href="javascript:void(0)" class="govuk-link govuk-link--no-visited-state float-right" (click)="onChange()">Change</a>
              </td>
            </tr>
          }
          @if (!casesToUnlink.length) {
            <tr class="govuk-table__row">
              <td class="govuk-table__cell" colspan="2">
                None
              </td>
            </tr>
          }
        </tbody>
      </table>
    }
    <!-- Table for both link case and manage link case journeys -->
    <table id="linked-cases-table" class="govuk-table">
      <caption class="govuk-table__caption govuk-table__caption--m">{{linkedCasesTableCaption}}</caption>
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">Case name and number</th>
          <th scope="col" class="govuk-table__header">Reasons for case link</th>
          <td scope="col" class="govuk-table__header"></td>
          @if (isLinkCasesJourney) {
            <th scope="col" class="govuk-table__header"></th>
          }
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        @for (case of linkedCases; track case) {
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">
              <span>{{case.caseName}}  <br> {{case.caseReference | ccdCaseReference}} </span>
            </td>
            <td class="govuk-table__cell">
              @for (reason of case.reasons; track reason; let isLast = $last) {
                <span>
                  @if (isLinkCasesJourney) {
                    <span>
                      {{reason | ccdLinkCasesReasonValue}}
                    </span>
                  }
                  @if (!isLinkCasesJourney) {
                    <span>
                      {{reason.Reason.value | ccdLinkCasesReasonValue}}
                    </span>
                  }
                  @if (!isLast) {
                    <br>
                    }
                  </span>
                }
              </td>
              <td class="govuk-table__cell"></td>
              @if (isLinkCasesJourney) {
                <td class="govuk-table__cell">
                  <a href="javascript:void(0)" class="govuk-link govuk-link--no-visited-state float-right" (click)="onChange()">Change</a>
                </td>
              }
            </tr>
          }
          @if (!linkedCases.length) {
            <tr class="govuk-table__row">
              <td class="govuk-table__cell" colspan="4">
                None
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
