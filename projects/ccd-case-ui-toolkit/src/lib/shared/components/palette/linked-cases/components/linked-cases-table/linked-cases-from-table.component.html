@if (!noLinkedCases && !isServerError) {
  <a id="show-hide-link" class="govuk-link" href="javascript:void(0)"
  (click)="onClick()">{{showHideLinkText}}</a>
}
@if ((getLinkedCasesResponse && showHideLinkText === 'Hide') || noLinkedCases) {
  <table
    aria-describedby="table to display cases linked from">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header case-table-column" width="20%">Case name and number</th>
        <th scope="col" class="govuk-table__header case-table-column" width="20%">Case type </th>
        <th scope="col" class="govuk-table__header case-table-column" width="20%">Service</th>
        <th scope="col" class="govuk-table__header case-table-column" width="20%">State</th>
        <th scope="col" class="govuk-table__header case-table-column" width="20%">Reasons for case link</th>
      </tr>
    </thead>
    @if (getLinkedCasesResponse && (!isServerError && !isServerReasonCodeError)) {
      <tbody class="govuk-table__body">
        @for (case of getLinkedCasesResponse; track case) {
          <tr class="govuk-table__row">
            <td class="govuk-table__header case-table-column width-20">
              <p class="govuk-body"><a target="_blank" class="govuk-link" href="cases/case-details/{{case.caseReference}}"
                rel="noopener"><span>{{case.caseNameHmctsInternal}} <br>
              {{case.caseReference | ccdCaseReference}}</span></a></p>
            </td>
            <td class="case-table-column"><span [title]="case.ccdCaseTypeDescription">{{case.ccdCaseType}}</span></td>
            <td class="case-table-column"><span>{{case.ccdJurisdiction}}</span></td>
            <td class="case-table-column"><span [title]="case.stateDescription">{{case.state}}</span></td>
            @for (details of case.linkDetails; track details) {
              <td class="case-table-column">
                @for (reason of details.reasons; track reason; let i = $index; let isLast = $last) {
                  <span>
                    {{reason | ccdLinkCasesFromReasonValue}}<span>@if (hasLeadCaseOrConsolidated(reason.reasonCode)) {
                    <a class="govuk-!-padding-left-1"
                      href="cases/case-details/{{ case.caseReference }}"
                    >{{getCaseReferenceLink(case.caseReference)}}</a>
                  }</span>
                  @if (!isLast) {
                    <br />
                  }
                </span>
              }
            </td>
          }
        </tr>
      }
      @if (noLinkedCases) {
        <tr class="govuk-table__row">
          <td class="govuk-table__cell" colspan="5">
            None
          </td>
        </tr>
      }
    </tbody>
  }
</table>
}
