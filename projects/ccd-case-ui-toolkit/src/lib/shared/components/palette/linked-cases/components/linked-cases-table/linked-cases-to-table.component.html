<div class="govuk-grid-row govuk-!-margin-bottom-2">
  <div class="govuk-grid-column-full">
    @if (linkedCasesFromResponse) {
      <table aria-describedby="table to display cases linked TO">
        <thead>
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header case-table-column" width="20%">Case name and number</th>
            <th scope="col" class="govuk-table__header case-table-column" width="20%">Case type </th>
            <th scope="col" class="govuk-table__header case-table-column" width="20%">Service</th>
            <th scope="col" class="govuk-table__header case-table-column" width="20%">State</th>
            <th scope="col" class="govuk-table__header case-table-column" width="20%">Reasons for case link</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          @for (case of linkedCasesFromResponse; track case) {
            <tr class="govuk-table__row">
              <td>
                <p class="govuk-body"><a target="_blank" href="cases/case-details/{{case.caseReference}}"
                  rel="noopener"><span class="govuk-link">{{case.caseName}} <br>
                {{case.caseReference | ccdCaseReference}}</span></a></p>
              </td>
              <td><span [title]="case.caseTypeDescription">{{case.caseType}}</span></td>
              <td><span>{{case.service}}</span></td>
              <td><span [title]="case.stateDescription">{{case.state}}</span>
            </td>
            @if (case && case.reasons) {
              <td>
                @for (reason of case.reasons; track reason; let i = $index; let isLast = $last) {
                  <span>
                    {{reason.value | ccdLinkCasesReasonValue}}<span>@if (hasLeadCaseOrConsolidated(reason.value.Reason)) {
                    <a class="govuk-!-padding-left-1"
                      href="cases/case-details/{{ case.caseReference }}"
                    >{{getCaseRefereneLink(case.caseReference)}}</a>
                  }</span>
                  @if (!isLast) {
                    <br />
                  }
                </span>
              }
            </td>
          }
        </tr>
      }
      @if (linkedCasesFromResponse.length === 0 && (!isServerError && !isServerReasonCodeError)) {
        <tr class="govuk-table__row">
          <td class="govuk-table__cell" colspan="5">
            None
          </td>
        </tr>
      }
    </tbody>
  </table>
}
</div>
</div>
