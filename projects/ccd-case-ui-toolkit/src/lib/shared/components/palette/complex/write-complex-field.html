<div class="form-group" [id]="id()">
  <fieldset>
    @if (renderLabel) {
      <legend>
        @if (caseField | ccdFieldLabel) {
          <h2 class="heading-h2">{{(caseField | ccdFieldLabel)}}</h2>
        }
      </legend>
    }
    @for (field of complexFields; track field) {
      @switch (field | ccdIsReadOnly) {
        @case (true) {
          <ccd-field-read
            ccdLabelSubstitutor
            [caseField]="buildField(field)"
            [caseFields]="caseFields"
            [formGroup]="formGroup"
            [withLabel]="true">
          </ccd-field-read>
        }
        @case (false) {
          <ccd-field-write
            ccdLabelSubstitutor
            [caseField]="field"
            [caseFields]="caseFields"
            [formGroup]="formGroup"
            [parent]="complexGroup"
            [idPrefix]="buildIdPrefix(field)"
            [hidden]="field.hidden"
            [isExpanded]="isExpanded"
            [isInSearchBlock]="isInSearchBlock">
          </ccd-field-write>
        }
      }
    }
  </fieldset>
</div>
