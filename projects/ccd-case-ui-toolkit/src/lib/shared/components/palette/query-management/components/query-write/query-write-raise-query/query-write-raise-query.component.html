<!-- Error message summary -->
<div *ngIf="errorMessages.length > 0" class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
  <h2 class="govuk-error-summary__title" id="error-summary-title">
    {{'There is a problem' | rpxTranslate}}
  </h2>
  <div *ngFor="let errorMessage of errorMessages" class="govuk-error-summary__body">
    <ul class="govuk-list govuk-error-summary__list">
      <li>
        <a (click)="navigateToErrorElement(errorMessage.fieldId)" class="validation-error">{{errorMessage.description | rpxTranslate}}</a>
      </li>
    </ul>
  </div>
</div>
<div>
  <div class="govuk-!-margin-bottom-6">
    <div class="govuk-caption-l">{{ 'Raise a query' | rpxTranslate }}</div>
    <h1 class="govuk-heading-l govuk-!-margin-bottom-4">{{ 'Enter query details' | rpxTranslate }}</h1>
  </div>

  <div>
    <ccd-query-case-details-header></ccd-query-case-details-header>
  </div>

  <hr>

  <div class="govuk-!-margin-bottom-4">
    <div [formGroup]="formGroup">
      <div>
        <div class="govuk-form-group" [ngClass]="{'govuk-form-group--error': !!queryFullNameError}">
          <div class="govuk-label-wrapper">
            <label class="govuk-label govuk-label--m govuk-!-font-weight-bold" for="query-raise-fullName">
              {{ 'Full name' | rpxTranslate }}
            </label>
          </div>
          <div id="query-raise-fullName-hint" class="govuk-hint">
            {{ 'Your full name must be included here' | rpxTranslate }}
          </div>
          <p id="query-raise-fullName-error" class="govuk-error-message"
              *ngIf="queryFullNameError">
            <span class="govuk-visually-hidden">{{ 'Error:' | rpxTranslate }}</span> {{ raiseQueryErrorMessage.FULL_NAME | rpxTranslate }}
          </p>
          <input class="govuk-input" id="query-raise-fullName" name="query-raise-fullName" type="text"
                  [formControlName]="'fullName'"/>
        </div>

        <div class="govuk-form-group" [ngClass]="{'govuk-form-group--error': !!querySubjectError}">
          <div class="govuk-label-wrapper">
            <label class="govuk-label govuk-label--m govuk-!-font-weight-bold" for="query-raise-subject">
              {{ 'Query subject' | rpxTranslate }}
            </label>
          </div>
          <div id="query-raise-subject-hint" class="govuk-hint">
            {{ 'The subject should be a summary of your query' | rpxTranslate }}
          </div>
          <p id="query-raise-subject-error" class="govuk-error-message"
              *ngIf="querySubjectError">
            <span class="govuk-visually-hidden">{{ 'Error:' | rpxTranslate }}</span> {{ raiseQueryErrorMessage.QUERY_SUBJECT | rpxTranslate }}
          </p>
          <input class="govuk-input" id="query-raise-subject" name="query-raise-subject" type="text"
                  [formControlName]="'subject'"/>
        </div>

        <div class="govuk-form-group" [ngClass]="{'govuk-form-group--error': !!queryBodyError}">
          <div class="govuk-label-wrapper">
            <label class="govuk-label govuk-label--m govuk-!-font-weight-bold" for="query-raise-body">
              {{ 'Query body' | rpxTranslate }}
            </label>
          </div>
          <div id="query-raise-body-hint" class="govuk-hint">
            {{ 'Include as many details as possible so case workers can respond to your query' | rpxTranslate }}
          </div>
          <p id="query-raise-body-error" class="govuk-error-message"
              *ngIf="queryBodyError">
            <span class="govuk-visually-hidden">{{ 'Error:' | rpxTranslate }}</span> {{ raiseQueryErrorMessage.QUERY_BODY | rpxTranslate }}
          </p>
          <textarea [formControlName]="'body'" class="govuk-textarea"
                    id="query-raise-body"name="query-raise-body" rows="5"
                    aria-describedby="query-raise-body-hint query-raise-body-error">
        </textarea>
        </div>

        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend>
              <label class="govuk-label govuk-label--m govuk-!-font-weight-bold">
                {{ 'Is the query hearing related?' | rpxTranslate }}
              </label>
            </legend>

            <div class="govuk-radios govuk-radios--inline" data-module="govuk-radios">
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="query-raise-isHearingRelated-yes" name="query-raise-isHearingRelated-yes" type="radio"
                        [checked]="formGroup.get('isHearingRelated').value === true" [value]="true"
                >
                <label class="govuk-label govuk-radios__label" for="query-raise-isHearingRelated-yes">
                  {{ 'Is the query hearing related?' | rpxTranslate: null : 'Yes' }}
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="query-raise-isHearingRelated-no" name="query-raise-isHearingRelated-no" type="radio"
                        [checked]="formGroup.get('isHearingRelated').value === false" [value]="false"
                >
                <label class="govuk-label govuk-radios__label" for="query-raise-isHearingRelated-no">
                  {{ 'Is the query hearing related?' | rpxTranslate: null : 'No' }}
                </label>
              </div>
            </div>
          </fieldset>
        </div>

        <div>
          <div class="govuk-form-group"
                [class.govuk-form-group--error]="formGroup.get('documents')?.errors?.length">
            <div class="govuk-label-wrapper">
              <label class="govuk-label" for="add-documents">
                <div class=" govuk-!-font-weight-bold">{{ 'Add document (optional)' | rpxTranslate }}</div>
                <div>{{ 'Attach a document to this message' | rpxTranslate }}</div>
              </label>
            </div>
            <p id="add-documents-error" class="govuk-error-message"
                *ngIf="formGroup.get('response')?.errors?.length">
              <span class="govuk-visually-hidden">{{ 'Error:' | rpxTranslate }}</span> {{ 'File error message' |
              rpxTranslate }}
            </p>

            <input class="govuk-file-upload" id="add-documents" name="add-documents" type="file">
          </div>
        </div>

        <button class="govuk-button" data-module="govuk-button" (click)="onNext()">
          {{ 'Next' | rpxTranslate }}
        </button>
      </div>
    </div>
  </div>
</div>
