<div class="govuk-!-margin-bottom-2">
  <a href="javascript:void(0)" class="govuk-back-link govuk-!-margin-top-0"
    [routerLink]="['/', 'cases', 'case-details', caseId, 'tasks']">
    {{ 'Cancel and return to tasks' | rpxTranslate }}
  </a>
</div>

<div class="govuk-!-margin-bottom-6">
  <div class="govuk-!-margin-bottom-6">
    <div class="govuk-caption-l">{{ 'Respond to query' | rpxTranslate }}</div>
    <h1 class="govuk-heading-l govuk-!-margin-bottom-0">{{ 'Query details' | rpxTranslate }}</h1>
  </div>

  <div class="govuk-!-margin-bottom-4">
    <ccd-query-case-details-header></ccd-query-case-details-header>
  </div>

  <div>
    <ccd-query-details-table [queryItem]="queryItem"></ccd-query-details-table>
  </div>
</div>

<div class="query-respond">
  <div class="govuk-!-margin-bottom-4">
    <h1 class="govuk-heading-m">
      {{ queryCreateContext === queryItemTypeEnum.RESPOND ? 'Respond to a query' : 'Ask a follow-up question' | rpxTranslate }}
    </h1>

    <div [formGroup]="formGroup">
      <div class="govuk-form-group"
           [class.govuk-form-group--error]="submitted && formGroup.get('fullName')?.hasError('required')">
        <div class="govuk-label-wrapper">
          <label class="govuk-label govuk-label--m govuk-!-font-weight-bold" for="fullName">
            {{ 'Full name' | rpxTranslate }}
          </label>
        </div>
        <div id="fullName-hint" class="govuk-hint">
          {{ 'Your full name must be included here' | rpxTranslate }}
        </div>
        <p id="fullName-error" class="govuk-error-message"
           *ngIf="submitted && formGroup.get('fullName')?.hasError('required')">
          <span class="govuk-visually-hidden">{{ 'Error:' | rpxTranslate }} </span>{{ raiseQueryErrorMessages.FULL_NAME | rpxTranslate }}
        </p>
        <input [formControlName]="'fullName'" type="text" name="fullName"
               class="govuk-input" id="fullName"
               [class.govuk-input--error]="submitted && formGroup.get('fullName')?.hasError('required')"
               />
      </div>

      <div class="govuk-form-group body-textarea"
           [class.govuk-form-group--error]="submitted && formGroup.get('body')?.hasError('required')">
        <div class="govuk-label-wrapper">
          <label class="govuk-label govuk-label--m govuk-!-font-weight-bold" for="body">
            {{ queryCreateContext === queryItemTypeEnum.RESPOND ? 'Response message' : 'Query Body' | rpxTranslate }}
          </label>
        </div>
        <p id="body-error" class="govuk-error-message"
           *ngIf="submitted && formGroup.get('body')?.hasError('required')">
          <span class="govuk-visually-hidden">{{ 'Error:' | rpxTranslate }} </span>{{ queryCreateContext === queryItemTypeEnum.RESPOND ? raiseQueryErrorMessages.RESPOND_QUERY_BODY : raiseQueryErrorMessages.QUERY_BODY | rpxTranslate }}
        </p>
        <textarea [formControlName]="'body'" class="govuk-textarea"
                  [class.govuk-textarea--error]="submitted && formGroup.get('body')?.hasError('required')" id="body"
                  name="body" rows="5" aria-describedby="body-hint body-error">
      </textarea>
      </div>
    </div>
  </div>
</div>
