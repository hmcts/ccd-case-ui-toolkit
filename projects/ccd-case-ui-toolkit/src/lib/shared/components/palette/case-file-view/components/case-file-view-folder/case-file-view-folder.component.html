<div class="document-folders-header">
  <div class="document-folders-header__title">Documents</div>
  <div>
    <ccd-case-file-view-folder-sort
      (sortAscending)="sortDataSourceAscAlphabetically()"
      (sortDescending)="sortDataSourceDescAlphabetically()"
    ></ccd-case-file-view-folder-sort>
  </div>
</div>

<div class="document-tree-container">
  <cdk-tree #tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl">
    <!-- document -->
    <cdk-nested-tree-node *cdkTreeNodeDef="let node" class="document-tree-node">
      <button class="node">
        <div class="node__icon" mat-icon-button disabled>
          <img src="/assets/images/document.png" class="node__iconImg" alt="Document icon">
        </div>
        <span class="node__name node-name-document">{{node.name}}</span>
        <div class="node__document-options">
          <ccd-case-file-view-folder-document-actions
            (changeFolderAction)="triggerDocumentAction('changeFolder')"
            (openInANewTabAction)="triggerDocumentAction('openInANewTab')"
            (downloadAction)="triggerDocumentAction('download')"
            (printAction)="triggerDocumentAction('print')">
          </ccd-case-file-view-folder-document-actions>
        </div>
      </button>
    </cdk-nested-tree-node>
    <!-- folder-->
    <cdk-nested-tree-node *cdkTreeNodeDef="let node; when: nestedChildren" class="document-tree-node">
      <button class="node" cdkTreeNodeToggle>
        <div class="node__icon" mat-icon-button [attr.aria-label]="'toggle ' + node.name" >
          <img src="/assets/images/folder.png" class="node__iconImg" alt="Folder icon">
          <span class="node__count">{{node.childDocumentCount}}</span>
        </div>
        <span class="node__name node__name--folder">{{node.name}}</span>
      </button>
      <div [class.document-tree-invisible]="!nestedTreeControl.isExpanded(node)">
        <ng-container cdkTreeNodeOutlet></ng-container>
      </div>
    </cdk-nested-tree-node>
  </cdk-tree>
</div>
