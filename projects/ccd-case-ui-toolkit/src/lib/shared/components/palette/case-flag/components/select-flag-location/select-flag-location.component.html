<ng-container [formGroup]="formGroup">
  <div class="govuk-form-group" [ngClass]="{'form-group-error': errorMessages.length > 0}">
    <fieldset class="govuk-fieldset" aria-describedby="flag-location-heading">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
        <h1 id="flag-location-heading" class="govuk-fieldset__heading">
          {{flagLocationTitle}}
        </h1>
      </legend>
      <div id="flag-location-not-selected-error-message" class="govuk-error-message"
        *ngIf="flagLocationNotSelectedErrorMessage">
        <span class="govuk-visually-hidden">Error:</span> {{flagLocationNotSelectedErrorMessage}}
      </div>
      <div class="govuk-radios govuk-radios--conditional" data-module="govuk-radios" id="conditional-radios-list">
        <div class="govuk-radios__item" *ngFor="let flagsInstance of filteredFlagsData; index as i">
          <input class="govuk-radios__input" id="flag-location-{{i}}" [name]="selectedLocationControlName"
            type="radio" [value]="flagsInstance" [formControlName]="selectedLocationControlName"/>
          <label class="govuk-label govuk-radios__label" for="flag-location-{{i}}">
            <ng-container *ngIf="flagsInstance.flags.partyName">
              {{flagsInstance.flags.partyName}}
              <ng-container *ngIf="flagsInstance.flags.roleOnCase">
                ({{flagsInstance.flags.roleOnCase}})
              </ng-container>
            </ng-container>
            <ng-container *ngIf="!flagsInstance.flags.partyName">
              {{caseLevelFlagLabel}}
            </ng-container>
          </label>
        </div>
      </div>
    </fieldset>
  </div>
</ng-container>

<div class="govuk-button-group" *ngIf="!caseFlagsConfigError">
  <button class="button button-primary" type="button" (click)="onNext()">Next</button>
</div>
