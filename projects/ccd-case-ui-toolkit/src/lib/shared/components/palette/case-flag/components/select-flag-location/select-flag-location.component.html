<ng-container [formGroup]="formGroup">
  <div class="govuk-form-group" [ngClass]="{'form-group-error': errorMessages.length > 0}">
    <fieldset class="govuk-fieldset" aria-describedby="flag-location-heading">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
        <h1 id="flag-location-heading" class="govuk-fieldset__heading">
          {{flagLocationTitle | rpxTranslate}}
        </h1>
      </legend>
      @if (flagLocationNotSelectedErrorMessage) {
        <div id="flag-location-not-selected-error-message" class="govuk-error-message"
          >
          <span class="govuk-visually-hidden">{{'Error:' | rpxTranslate}}</span> {{flagLocationNotSelectedErrorMessage | rpxTranslate}}
        </div>
      }
      <div class="govuk-radios govuk-radios--conditional" data-module="govuk-radios" id="conditional-radios-list">
        @for (flagsInstance of filteredFlagsData; track flagsInstance; let i = $index) {
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="flag-location-{{i}}" [name]="selectedLocationControlName"
              type="radio" [value]="flagsInstance" [formControlName]="selectedLocationControlName"/>
            <label class="govuk-label govuk-radios__label" for="flag-location-{{i}}">
              @if (flagsInstance.flags.partyName) {
                {{flagsInstance.flags.partyName}}
                @if (flagsInstance.flags.roleOnCase) {
                  ({{flagsInstance.flags.roleOnCase | rpxTranslate}})
                }
              }
              @if (!flagsInstance.flags.partyName) {
                {{caseLevelFlagLabel | rpxTranslate}}
              }
            </label>
          </div>
        }
      </div>
    </fieldset>
  </div>
</ng-container>