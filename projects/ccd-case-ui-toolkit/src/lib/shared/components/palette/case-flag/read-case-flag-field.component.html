@if (context === paletteContext.CHECK_YOUR_ANSWER) {
  <ccd-case-flag-summary-list
    [flagForSummaryDisplay]="flagForSummaryDisplay"
    [displayContextParameter]="displayContextParameter"
    (changeButtonEmitter)="navigateBackToForm($event)">
  </ccd-case-flag-summary-list>
}

@if (context !== paletteContext.CHECK_YOUR_ANSWER) {
  @switch (displayContextParameter) {
    @case (caseFlagDisplayContextParameter.READ_EXTERNAL) {
      <h2 id="read-case-flag-title" class="govuk-heading-l">
        {{ 'Support requested' | rpxTranslate }}
      </h2>
      @for (flagData of partyLevelCaseFlagData; track flagData) {
        <div>
          @if (flagData.flags.partyName) {
            <ccd-case-flag-table
              [tableCaption]="''"
              [flagData]="flagData"
              [firstColumnHeader]="flagData.flags.partyName"
              [caseFlagsExternalUser]="caseFlagsExternalUser"
            ></ccd-case-flag-table>
          }
        </div>
      }
    }
    @default {
      <h2 id="read-case-flag-title" class="govuk-heading-l">
        {{ 'Case flags' | rpxTranslate }}
      </h2>
      @for (flagData of partyLevelCaseFlagData; track flagData) {
        <div>
          @if (flagData.flags.partyName) {
            <ccd-case-flag-table
              [tableCaption]="flagData.flags.partyName"
              [flagData]="flagData"
              [firstColumnHeader]="'Party level flags' | rpxTranslate"
            ></ccd-case-flag-table>
          }
        </div>
      }
      @if (caseLevelCaseFlagData) {
        <div>
          <ccd-case-flag-table
            [tableCaption]="'Case level flags' | rpxTranslate"
            [flagData]="caseLevelCaseFlagData"
            [firstColumnHeader]="'Case flags' | rpxTranslate"
          ></ccd-case-flag-table>
        </div>
      }
    }
  }
}
