@if (flagData) {
  <table class="govuk-table">
    @if (tableCaption) {
      <caption class="govuk-table__caption govuk-table__caption--l">{{tableCaption}}</caption>
    }
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header col-party-name">{{firstColumnHeader}}</th>
        <th scope="col" class="govuk-table__header col-comments">{{'Comments' | rpxTranslate}}</th>
        <th scope="col" class="govuk-table__header col-creation-date">{{'Creation date' | rpxTranslate}}</th>
        <th scope="col" class="govuk-table__header col-last-modified">{{'Last modified' | rpxTranslate}}</th>
        <th scope="col" class="govuk-table__header col-flag-status">{{'Flag status' | rpxTranslate}}</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      @if (!flagData.flags.details || (flagData.flags.details && flagData.flags.details.length === 0)) {
        <tr>
          <td colspan="5">{{'None' | rpxTranslate}}</td>
        </tr>
      }
    </tbody>
    @if (flagData.flags.details && flagData.flags.details.length > 0) {
      <tbody class="govuk-table__body">
        @for (flagDetail of flagData.flags.details; track flagDetail) {
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell">
              <div>{{flagDetail | flagFieldDisplay:'name'}}</div>
              <div>{{flagDetail | flagFieldDisplay:'otherDescription'}}</div>
              <div>{{flagDetail | flagFieldDisplay:'subTypeValue'}}</div>
            </td>
            <td class="govuk-table__cell">
              <div>{{flagDetail | flagFieldDisplay:'flagComment'}}</div>
              @if (!caseFlagsExternalUser &&
                (flagDetail.status === caseFlagStatus.NOT_APPROVED || flagDetail.status === caseFlagStatus.INACTIVE) &&
                flagDetail.flagUpdateComment) {
                <div>
                  <span class="govuk-!-font-weight-bold">Update Reason: {{flagDetail.flagUpdateComment}}</span>
                </div>
              }
            </td>
            <td class="govuk-table__cell">{{flagDetail.dateTimeCreated | date: 'dd LLL yyyy'}}</td>
            <td class="govuk-table__cell">{{flagDetail.dateTimeModified | date: 'dd LLL yyyy'}}</td>
            <td class="govuk-table__cell cell-flag-status">
              @if (flagDetail.status === caseFlagStatus.ACTIVE) {
                <strong class="govuk-tag govuk-tag--turquoise">{{'Active' | rpxTranslate}}</strong>
              }
              @if (flagDetail.status === caseFlagStatus.INACTIVE) {
                <strong class="govuk-tag govuk-tag--grey">{{'Inactive' | rpxTranslate}}</strong>
              }
              @if (flagDetail.status === caseFlagStatus.REQUESTED) {
                <strong class="govuk-tag govuk-tag--yellow">{{'Requested' | rpxTranslate}}</strong>
              }
              @if (flagDetail.status === caseFlagStatus.NOT_APPROVED) {
                <strong class="govuk-tag govuk-tag--red">{{'Not approved' | rpxTranslate}}</strong>
              }
            </td>
          </tr>
        }
      </tbody>
    }
  </table>
}
