<div class="govuk-form-group  bottom-30" [id]="caseField.id"
     [ngClass]="{'form-group-error': localDisplayControl && !localDisplayControl.valid && localDisplayControl.dirty}">
  <fieldset>
    <legend>
      <span class="form-label" *ngIf="caseField.label">{{(caseField | ccdFieldLabel)}}</span>
      <span class="form-hint" *ngIf="caseField.hint_text">{{caseField.hint_text | rpxTranslate}}</span>
      <span class="error-message"
            *ngIf="localDisplayControl && localDisplayControl.errors && localDisplayControl.dirty && !(minError || maxError)">{{(localDisplayControl.errors | ccdFirstError:caseField.label)}}</span>
            <span class="error-message"
            *ngIf="localDisplayControl && localDisplayControl.dirty && minError">{{'This date is older than the minimum date allowed' | rpxTranslate}}</span>
            <span class="error-message"
            *ngIf="localDisplayControl && localDisplayControl.dirty && maxError">{{'This date is later than the maximum date allowed' | rpxTranslate}}</span>
    </legend>
    <div class="datepicker-container">
      <input class="govuk-input"
             #input
             attr.aria-label="Please enter a date and time in the format | rpxTranslate {{dateTimeEntryFormat}}"
             [min]="minDate(caseField)"
             [max]="maxDate(caseField)"
             [formControl]="localDisplayControl"
             [ngxMatDatetimePicker]="picker"
             (focusin)="focusIn()"
             (focusout)="focusOut()"
             (dateChange)="valueChanged()"
      >
      <mat-datepicker-toggle matSuffix [for]="picker" id="pickerOpener"></mat-datepicker-toggle>
      <ngx-mat-datetime-picker #picker
                               [color]="color"
                               [touchUi]="touchUi"
                               [hideTime]="hideTime"
                               [startView]="startView"
                               [stepHour]="stepHour"
                               [stepSecond]="stepSecond"
                               [stepMinute]="stepMinute"
                               [showSeconds]="showSeconds"
                               [showSpinners]="showSpinners"
                               [disableMinute]="disableMinute"
                               [enableMeridian]="enableMeridian"
                               (yearSelected)="yearSelected($event)"
                               (monthSelected)="monthSelected($event)"
                               (opened)="toggleClick()"
      >
        <ngx-mat-datepicker-actions>
          <button mat-raised-button color="primary" ngxMatDatepickerApply>Confirm</button>
        </ngx-mat-datepicker-actions>
      </ngx-mat-datetime-picker>
    </div>
  </fieldset>
</div>
