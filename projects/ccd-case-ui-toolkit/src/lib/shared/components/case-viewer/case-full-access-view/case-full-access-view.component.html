<!-- Generic error heading and error message to be displayed only if there are no specific callback errors or warnings, or no error details -->
<ccd-activity [caseId]="caseDetails.case_id" [displayMode]="BANNER"></ccd-activity>
<div class="grid-row">
  <div class="column-one-half">
    <ccd-case-header [caseDetails]="caseDetails"></ccd-case-header>
    <div class="case-viewer-controls" *ngIf="hasPrint && !isDraft() && isPrintEnabled()">
      <a id="case-viewer-control-print" routerLink="print" class="button button-secondary">{{'Print' | rpxTranslate}}</a>
    </div>
  </div>
  <div *ngIf="hasEventSelector" class="column-one-half">
    <ccd-event-trigger [isDisabled]="isTriggerButtonDisabled()" [triggers]="caseDetails.triggers"
                       [triggerText]="triggerText"
                       [eventId]="eventId"
                       (onTriggerChange)="clearErrorsAndWarnings()"
                       (onTriggerSubmit)="applyTrigger($event)"></ccd-event-trigger>
  </div>
</div>
<div class="grid-row" *ngIf="activeCaseFlags && !caseFlagsExternalUser">
  <div class="column-full">
    <ccd-notification-banner [notificationBannerConfig]="notificationBannerConfig" (linkClicked)="onLinkClicked($event)">
    </ccd-notification-banner>
  </div>
</div>
<div class="grid-row">
  <div class="column-full">
    <ng-container *ngIf="hasTabsPresent()">
      <mat-tab-group #tabGroup animationDuration="0ms" (selectedIndexChange)="tabChanged($event)" [disableRipple]="true"
        [selectedIndex]="selectedTabIndex">
        <mat-tab *ngFor="let tab of prependedTabs" [id]="tab.id" [label]="tab.label | rpxTranslate">
        </mat-tab>
        <mat-tab *ngFor="let tab of sortedTabs; let curIdx=index" [id]="tab.id" [label]="tab.label | rpxTranslate">
          <ng-template matTabContent>
            <div class="hide-table-capion" id="table_caption">{{tab.label  | rpxTranslate}}</div>
            <table class="olaaa" [class]="tab.id" aria-labelledby="table_caption">
              <tbody>
              
              <ng-container *ngFor="let field of tab | ccdTabFields | ccdReadFieldsFilter:false :undefined :true : formGroup.controls['data']">
                <div ccdLabelSubstitutor [caseField]="field" [contextFields]="caseFields" [hidden]="field.hidden">
                  <ng-container [ngSwitch]="!(field | ccdIsCompound)">
                    <tr *ngSwitchCase="true">
                      <th id="case-viewer-field-label" *ngIf="!isFieldToHaveNoLabel(field)">
                        <div class="case-viewer-label text-16">
                          {{field.label | rpxTranslate}}&ZeroWidthSpace;</div>
                      </th>
                      <td [id]="'case-viewer-field-read--' + field.id" scope="col">
                        <span class="text-16">
                          <ccd-field-read [topLevelFormGroup]="formGroup.controls['data']"
                                          [caseField]="field" [caseReference]="caseDetails.case_id"
                                          [markdownUseHrefAsRouterLink]="markdownUseHrefAsRouterLink">
                          </ccd-field-read>
                        </span>
                      </td>
                    </tr>
                    <tr *ngSwitchCase="false" class="compound-field">
                      <th [id]="'case-viewer-field-read--' + field.id" scope="col">
                        <span class="text-16">
                          <ccd-field-read [topLevelFormGroup]="formGroup.controls['data']"
                                          [caseField]="field" [caseReference]="caseDetails.case_id"
                                          [markdownUseHrefAsRouterLink]="markdownUseHrefAsRouterLink">
                          </ccd-field-read>
                        </span>&ZeroWidthSpace;
                      </th>
                    </tr>
                  </ng-container>
                </div>
              </ng-container>
              </tbody>
            </table>
          </ng-template>
        </mat-tab>
        <mat-tab *ngFor="let tab of appendedTabs" [id]="tab.id" [label]="tab.label | rpxTranslate">
        </mat-tab>
      </mat-tab-group>
      <router-outlet *ngIf="(prependedTabs && prependedTabs.length) || (appendedTabs && appendedTabs.length)"></router-outlet>
    </ng-container>
  </div>
</div>
