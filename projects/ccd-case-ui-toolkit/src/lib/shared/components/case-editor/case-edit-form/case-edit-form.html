@for (field of fields; track field) {
  <ng-container ccdConditionalShowForm [formGroup]="formGroup" [caseFields]="fields" [contextFields]="caseFields"
    >
    <div ccdLabelSubstitutor [caseField]="field" [formGroup]="formGroup" [contextFields]="caseFields">
      @switch (field | ccdIsReadOnlyAndNotCollection) {
        @case (true) {
          <ccd-field-read [caseField]="field" [caseFields]="caseFields" [withLabel]="true"
            [formGroup]="formGroup" [attr.field_id]="field.id"
          [attr.field_type]="field.field_type.type"></ccd-field-read>
        }
        @case (false) {
          @if (!(field | ccdIsCompound)) {
            <ccd-field-write [caseField]="field"
              [caseFields]="caseFields"
              [formGroup]="formGroup"
              [idPrefix]=""
              [hidden]="field.hidden"
              [attr.field_id]="field.id"
              [attr.field_type]="field.field_type.type">
            </ccd-field-write>
          } @else {
            <ccd-field-write [caseField]="field"
              [caseFields]="caseFields"
              [formGroup]="formGroup"
              [idPrefix]="field.id + '_'"
              [hidden]="field.hidden"
              [attr.field_id]="field.id"
            [attr.field_type]="field.field_type.type"></ccd-field-write>
          }
        }
      }
    </div>
  </ng-container>
}
